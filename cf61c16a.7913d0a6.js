(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(75),s=a(77),c=a(80),i=a(3),m=a(71),u=a(72),h=a.n(u),p=a(81),d=a(82),y=a(94),l=a(86),C=a(87),g=a(95),f=a(89),w=a(78),v=a(83),b=a(93),E=function(e){function t(t){var a;a=e.call(this,t)||this;var n=t.match.params.id,r=a.getCountryData(t.match.params.id);a.platformRepo=new v.a(d),a.gatewayRepo=new w.a(d);var o=a.getGateways(n),s=a.getRecommended(o);return a.state={country:r,gateways:o,compare:s},a.onChangeCountry=a.onChangeCountry.bind(Object(c.a)(a)),a.onChangeGateway=a.onChangeGateway.bind(Object(c.a)(a)),a.addToCompare=a.addToCompare.bind(Object(c.a)(a)),a.clearAndAddToCompare=a.clearAndAddToCompare.bind(Object(c.a)(a)),a.removeFromCompare=a.removeFromCompare.bind(Object(c.a)(a)),a}Object(i.a)(t,e);var a=t.prototype;return a.getCountryData=function(e){return h.a.find(p,{code:h.a.upperCase(e)})},a.componentDidMount=function(){var e=this;this.state.country||this.getCountryByIp().catch((function(){return"US"})).then((function(t){t&&e.props.history.push("/country/"+t.toLowerCase())}))},a.componentDidUpdate=function(e,t,a){var n=this,r=this.props.match.params.id;if(h.a.get(e,"match.params.id")!==r){var o=this.getCountryData(r);o||this.getCountryByIp().catch((function(){return"US"})).then((function(e){e&&n.props.history.push("/country/"+e.toLowerCase())}));var s=this.getGateways(r),c=this.getRecommended(s);this.setState({gateways:s,compare:c,country:o})}},a.getCountryByIp=function(){return b.a.countryCode()},a.onChangeCountry=function(e){this.props.match.params.id!==e.value&&this.props.history.push("/country/"+(e.value||"").toLowerCase())},a.getGateways=function(e){return void 0===e&&(e=null),this.gatewayRepo.query().whereIncludes("countries",e?(e||"").toUpperCase():null).get()},a.getGatewaysCountries=function(){var e=new Set,t=this.getGateways();return t&&t.forEach((function(t){(t.countries||[]).forEach((function(t){e.add(t)}))})),e},a.getOrdered=function(e){return h.a.orderBy(e,["recommended","name"],["asc","asc"])},a.addToCompare=function(e){var t=[].concat(this.state.compare);t.push(e),this.setState({compare:t})},a.clearAndAddToCompare=function(e){var t=[];t.push(e),this.setState({compare:t})},a.removeFromCompare=function(e){var t=[].concat(this.state.compare);t=h.a.filter(t,(function(t){return t.id!==e.id})),this.setState({compare:t})},a.onChangeGateway=function(e){var t=h.a.find(this.state.gateways,{id:e.value});this.clearAndAddToCompare(t)},a.getECommerces=function(){return this.platformRepo.query().where("type","=","ECOMMERCE").get()},a.getRecommended=function(e){return h.a.filter(e,{recommended:!0})},a.render=function(){if(!this.state.country)return null;[this.state.country.name,h.a.upperCase(this.state.country.code),"Pricing","Compare","Best payment gateway for "+this.state.country.name,"Cheapest payment gateway for "+this.state.country.name].filter((function(e){return!!h.a.trim(e)}));return r.a.createElement(o.a,{title:"Compare the "+this.state.gateways.length+" best payment gateways in "+(this.state.country||{name:"the country"}).name},r.a.createElement("div",{className:"container"})," ",r.a.createElement("div",{className:Object(m.a)("container","my-5")},r.a.createElement(f.a,{img:this.state.country.flag_base64,name:this.state.country.name,className:"bordered"}),r.a.createElement(l.a,{countries:this.getGatewaysCountries(),className:"mb-5",onChange:this.onChangeCountry,value:h.a.upperCase(this.state.country.code)}),r.a.createElement("hr",null),r.a.createElement(g.a,{title:"The following payment processors support "+this.state.country.name,gateways:this.getOrdered(this.state.gateways),selected:this.state.compare,onShow:this.clearAndAddToCompare,onAddToCompare:this.addToCompare,onRemoveFromCompare:this.removeFromCompare}),r.a.createElement(C.a,{gateways:this.state.gateways,recommendedFirst:!0,value:h.a.get(this,"state.compare[0]"),onChange:this.onChangeGateway,className:"mb-5"})),r.a.createElement("div",{className:"container-fluid mb-5"},r.a.createElement(y.a,{platform:this.platform,gateways:this.state.compare,country:this.state.country.code,ecommerces:this.getECommerces(),className:"mx-auto"})))},t}(r.a.Component);t.default=function(){var e=Object(s.useRouteMatch)();return r.a.createElement(s.Switch,null,r.a.createElement(s.Route,{path:e.path+"/:id?",component:E}))}}}]);